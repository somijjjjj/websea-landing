<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Websea 거래 시뮬레이터 - Trading Simulation Tool</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="bg-animation"></div>

    <nav>
        <div class="logo" onclick="window.location.href='index.html'">WEBSEA</div>
    </nav>

    <div class="container">
        <div class="header">
            <h1>거래 시뮬레이터</h1>
            <p>초기 자본, 승률, 레버리지를 설정하여 거래 성과를 시뮬레이션 하세요</p>
        </div>

        <!-- Settings Panel -->
        <div class="settings-panel">
            <!-- 거래 설정 섹션 -->
            <div class="settings-section">
                <h3>⚙️ 거래 설정</h3>
                <div class="settings-grid">
                    <div class="input-group">
                        <label for="initialInvestment">초기 투자금</label>
                        <div class="input-wrapper">
                            <input type="text" id="initialInvestment" value="10,000" data-value="10000">
                            <span class="input-unit">USDT</span>
                        </div>
                    </div>

                    <div class="input-group calculated">
                        <label for="insuranceReserve">보험금 10%</label>
                        <div class="input-wrapper">
                            <input type="text" id="insuranceReserve" value="1,000" readonly>
                            <span class="input-unit">USDT</span>
                        </div>
                    </div>

                    <div class="input-group calculated">
                        <label for="futuresSeed">선물 시드</label>
                        <div class="input-wrapper">
                            <input type="text" id="futuresSeed" value="9,000" readonly>
                            <span class="input-unit">USDT</span>
                        </div>
                    </div>

                    <div class="input-group readonly">
                        <label for="baseFeeRate">지정가 기본 수수료율</label>
                        <div class="input-wrapper">
                            <input type="text" id="baseFeeRate" value="0.06" readonly>
                            <span class="input-unit">%</span>
                        </div>
                    </div>

                    <div class="input-group readonly">
                        <label for="actualFeeRate">실제 수수료율(1회)</label>
                        <div class="input-wrapper">
                            <input type="text" id="actualFeeRate" value="1.5" readonly>
                            <span class="input-unit">%</span>
                        </div>
                    </div>

                    <div class="input-group readonly">
                        <label for="tradeFeeRate">1거래 완결 수수료율</label>
                        <div class="input-wrapper">
                            <input type="text" id="tradeFeeRate" value="3" readonly>
                            <span class="input-unit">%</span>
                        </div>
                    </div>

                    <div class="input-row triple-grid">
                        <div class="input-group calculated">
                            <label for="dailyTrades">1일 거래 횟수</label>
                            <div class="input-wrapper">
                                <input type="text" id="dailyTrades" value="105" readonly>
                                <span class="input-unit">회</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="winCount">승리 횟수</label>
                            <div class="input-wrapper">
                                <input type="number" id="winCount" value="75" min="0" step="1">
                                <span class="input-unit">회</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="lossCount">패배 횟수</label>
                            <div class="input-wrapper">
                                <input type="number" id="lossCount" value="30" min="0" step="1">
                                <span class="input-unit">회</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="selfReferralRate">셀프 레퍼럴 비율</label>
                        <div class="input-wrapper">
                            <input type="number" id="selfReferralRate" value="20" min="0" max="100" step="1">
                            <span class="input-unit">%</span>
                        </div>
                    </div>

                </div>
            </div>

            <div class="divider"></div>

            <!-- 봇 설정 섹션 -->
            <div class="settings-section">
                <h3>⚙️ 봇 설정</h3>
                <div class="settings-grid">
                    <div class="input-group">
                        <label for="leverage">레버리지</label>
                        <div class="input-wrapper">
                            <input type="number" id="leverage" value="25" min="1" max="100" step="1">
                            <span class="input-unit">배</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="seedRate">시드 비율</label>
                        <div class="input-wrapper">
                            <input type="number" id="seedRate" value="1" min="1" max="100" step="1">
                            <span class="input-unit">%</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="winProfitRate">익절률</label>
                        <div class="input-wrapper">
                            <input type="number" id="winProfitRate" value="5" min="1" max="100" step="1">
                            <span class="input-unit">%</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="lossRate">손절률</label>
                        <div class="input-wrapper">
                            <input type="number" id="lossRate" value="-10" min="-100" max="-1" step="1">
                            <span class="input-unit">%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="divider"></div>

            <!-- 보험 설정 섹션 -->
            <div class="settings-section">
                <h3>⚙️ 보험</h3>
                <div class="settings-grid">
                    <div class="input-group readonly">
                        <label for="nodeCost">1노드 생성 기준 손실</label>
                        <div class="input-wrapper">
                            <input type="text" id="nodeCost" value="100" readonly>
                            <span class="input-unit">USDT</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="airdropPerDay">하루 에어드랍 횟수</label>
                        <div class="input-wrapper">
                            <input type="number" id="airdropPerDay" value="2" min="1" max="10" step="1">
                            <span class="input-unit">회</span>
                        </div>
                    </div>

                    <div class="input-group readonly">
                        <label for="pendingDays">펜딩일수</label>
                        <div class="input-wrapper">
                            <input type="text" id="pendingDays" value="3" readonly>
                            <span class="input-unit">일</span>
                        </div>
                    </div>

                    <div class="input-group readonly">
                        <label for="totalAirdropCount">노드당 총 에어드랍 횟수</label>
                        <div class="input-wrapper">
                            <input type="text" id="totalAirdropCount" value="100" readonly>
                            <span class="input-unit">회</span>
                        </div>
                    </div>

                    <div class="input-group readonly">
                        <label for="activeDays">활성일수</label>
                        <div class="input-wrapper">
                            <input type="text" id="activeDays" value="50" readonly>
                            <span class="input-unit">일</span>
                        </div>
                    </div>

                    <div class="input-group readonly">
                        <label for="nodeLifeDays">노드 수명일수</label>
                        <div class="input-wrapper">
                            <input type="text" id="nodeLifeDays" value="53" readonly>
                            <span class="input-unit">일</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="divider"></div>

            <!-- 시뮬레이션 기간 섹션 -->
            <div class="settings-section">
                <h3>⚙️ 시뮬레이션 기간</h3>
                <div class="settings-grid">
                    <div class="input-group">
                        <label for="days">시뮬레이션 기간</label>
                        <div class="input-wrapper">
                            <input type="number" id="days" value="100" min="1" max="365" step="1">
                            <span class="input-unit">일</span>
                        </div>
                    </div>
                </div>
            </div>

            <button class="cta-button" onclick="runSimulation()">
                시뮬레이션 실행
            </button>
        </div>

        <!-- Loading -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>시뮬레이션 실행 중...</p>
        </div>

        <!-- Results Panel -->
        <div class="results-panel" id="resultsPanel">
            <h2 style="color: var(--accent-green); margin-bottom: 2rem;">📊 시뮬레이션 결과</h2>

            <div class="summary-grid">
                <div class="summary-card">
                    <h3>최종 총 자본</h3>
                    <div class="value" id="finalCapital">-<span class="unit">USDT</span></div>
                </div>

                <div class="summary-card">
                    <h3>순손익</h3>
                    <div class="value" id="netProfit">-<span class="unit">USDT</span></div>
                </div>

                <div class="summary-card">
                    <h3>누적 에어드랍</h3>
                    <div class="value" id="totalAirdrop">-<span class="unit">USDT</span></div>
                </div>

                <div class="summary-card">
                    <h3>활성 노드</h3>
                    <div class="value" id="activeNodes">-<span class="unit">개</span></div>
                </div>
            </div>

            <div class="results-table-container">
                <h3 style="color: var(--text-gray); margin-bottom: 1rem;">일별 상세 결과</h3>
                <table id="resultsTable">
                    <thead>
                        <tr>
                            <th class="sticky-col-1">일차</th>
                            <th class="sticky-col-2">총 자본</th>
                            <th class="sticky-col-3">총 운용 자본</th>
                            <th>시작 자본</th>
                            <th>시드(1%)</th>
                            <th>승리 횟수</th>
                            <th>패배 횟수</th>
                            <th>총 익절 금액</th>
                            <th>총 손절 금액</th>
                            <th>일일 손익</th>
                            <th>일일 수수료</th>
                            <th>셀프 레퍼럴</th>
                            <th>순손익(Net P/L)</th>
                            <th>종료 자본(End)</th>
                            <th>보험 풀 누적</th>
                            <th>당일 생성 노드</th>
                            <th>보험 풀 잔액</th>
                            <th>대기 노드 수</th>
                            <th>활성 노드 수</th>
                            <th>만료된 노드 수</th>
                            <th>새로 활성된 노드 수</th>
                            <th>오늘 에어드랍 총액</th>
                            <th>누적 에어드랍 합계</th>
                        </tr>
                    </thead>
                    <tbody id="resultsBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="simulator.js"></script>
</body>
</html>
